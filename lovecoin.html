<!DOCTYPE html>
<html lang="nl" />

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Flexidating | Koop Lovecoins</title>

    <!-- STYLE SHEET LINKS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" />
    <link href="css/_main_css.css" rel="stylesheet" type="text/css" />
    <link href="css/_page_css_lovecoin.css" rel="stylesheet" type="text/css" />

</head>

<body>
    <div>
        <p>
            <h1>Love Coin kopen</h1>
        </p>
        <p>
            <Label>Love coins</Label> <input type="text" id="lovecoin">
            <label id="resultat"></label>
        </p>
        <p><button id="knopkopen">Kopen</button></p>
    </div>

    <!-- SCRIPT LINKS -->
    <script src="js/responsive_design.js"> </script>
    <script src="js/sterrenbeeld.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script>
    <script async src="js/flexi_scrum_2.1.0.min.js"></script>
    <script defer>
        window.onload = function () {
            var ca = document.cookie.split('=');
            var user = scrumlib.getDatasetById(ca[1]);
            var searchMap = {};
            var updatemap = {};
            //var user1=scrumlib.getAllDatasets();
            var lovecoin = document.getElementById("lovecoin");
            var userid = document.cookie.value;
            var knopkopen = document.getElementById("knopkopen");

            //scrumlib.addProperty("lovecoin", "Number", 0);
            var resultat = document.getElementById("resultat");
            // console.log(scrumlib.getAllDatasets());
            console.log(lovecoin.value);
            resultat.innerHTML = "";

        }
        knopkopen.addEventListener("click", function (e) {
            console.log(lovecoin.value);
            var ca = document.cookie.split('=');
            var user = scrumlib.getDatasetById(ca[1]);
            var updatemap = {};
            resultat.innerHTML = "";
            if ((parseInt(lovecoin.value) > 1) && (parseInt(lovecoin.value) < 100)) {
                updatemap.lovecoin = user[0].lovecoin + parseInt(lovecoin.value);
                console.log(lovecoin.value);
                console.log(user[0].lovecoin);
                scrumlib.updateDataset(user[0]._id, updatemap);
                scrumlib.save();
                console.log(lovecoin.value);
                console.log(scrumlib.getAllDatasets());
                resultat.innerHTML = "Je heb " + lovecoin.value + " lovecoins gekocht.";
            } else {
                resultat.innerHTML = "Kies een aantal tussen 1 en 100.";
            }



        });
    </script>
</body>
</html>