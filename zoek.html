<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="" width="", initial-scale=" 1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>

<body>
    <div id="Zoek">
        <p><label>Zoek by:</label></p>
        <p><label>Geslacht</label><select name="geslacht" id="zoek_geslacht">
                <option value="">Beide</option>
                <option value="m">man</option>
                <option value="v">vrouw</option>
            </select></p>

        <p>
            <label>LeefTijd tussen </label><input type="text" name="minleefTijd" id="minleefTijd"> <label>en</label>
            <input type="text" name="maxleefTijd" id="maxleefTijd">
        </p>
        <p>
            <label>Grootte tussen </label><input type="text" name="mingrootte" id="mingrootte"> <label>en</label>
            <input type="text" name="maxGrootte" id="maxGrootte">

            <p>
                <label>Gewichttussen </label><input type="text" name="mingewicht" id="mingewicht"> <label>en</label>
                <input type="text" name="maxgewicht" id="maxgewicht">
            </p>

            <p>
                <label>Haar kleur</label>
                <select id="zoek_haarkleur" name="haarkleur">
                    <option value="">Alles</option>
                    <option value="blond">blond</option>
                    <option value="brunete">brunete</option>
                    <option value="rood">rood</option>
                    <option value="zwart">zwart</option>
                    <option value="andere kleur">andere kleur</option>
                </select>
            </p>
            <p>
                <label>Oog kleur</label>
                <select name="zoek_oogKleur" id="oogkleur">
                    <option value="">Alles</option>
                    <option value="blauw">blauw</option>
                    <option value="bruin">bruin</option>
                    <option value="zwart">zwart</option>
                    <option value="groen">groen</option>
                    <option value="andere kleur">andere kleur</option>
                </select>
            </p>
            <p>
                <label>Lichaamsbouw </label>
                <select name="lichaamsbouw" id="zoek_lichaamsbouw">
                    <option value="">Alles</option>
                    <option value="volslank">volslank</option>
                    <option value="atletisch">atletisch</option>
                    <option value="slank">slank</option>
                    <option value="normaal">normaal</option>
                </select>
            </p>
            <p>
                <label>Sterenbeld</label><select id="zoek_sterrenbeeld">
                    <option value="">Alles</option>
                    <option value="Steenbok">Steenbok</option>
                    <option value="Waterman">Waterman</option>
                    <option value="Vissen">Vissen</option>
                    <option value="Ram">Ram</option>
                    <option value="Stier">Stier</option>
                    <option value="Tweelingen">Tweelingen</option>
                    <option value="Kreeft">Kreeft</option>
                    <option value="Leeuw">Leeuw</option>
                    <option value="Maagd">Maagd</option>
                    <option value="Weegschaal">Weegschaal</option>
                    <option value="Schorpioen">Schorpioen</option>
                    <option value="Boogschutter">Boogschutter</option>
                </select>
            </p>
            <p>
                <label>Provincie</label>
                <select name="provincie" id="zoek_provincie">
                    <option value="">Alles</option>
                    <option value="Antwerpen">Antwerpen</option>
                    <option value="Limburg">Limburg</option>
                    <option value="Oost-Vlaanderen">Oost-Vlaanderen</option>
                    <option value="Vlaams-Brabant">Vlaams-Brabant</option>
                    <option value="West-Vlaanderen">West-Vlaanderen</option>
                    <option value="Henegouwen">Henegouwen</option>
                    <option value="Luik">Luik</option>
                    <option value="Luxemburg">Luxemburg</option>
                    <option value="Namen ">Namen </option>
                    <option value="Waals-Brabant">Waals-Brabant</option>

                </select>
            </p>

            <button name="knopzoek" id="knopzoek">Zoek</button>

    </div>
    <div id="conteiner">
    </div>
</body>
<script src="js/sterrenbeeld.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script>
<script async src="js/flexi_scrum_2.1.0.min.js"></script>
<script defer>
    button1 = document.getElementById("knopzoek");
    button1.addEventListener("click", function (e) {
        var searchMap = {};
        var conditions = [];
        var egeslacht = document.getElementById("zoek_geslacht");
        var geslacht = egeslacht.options[egeslacht.selectedIndex].value;
        var ehaarKleur = document.getElementById("zoek_haarkleur");
        var haarKleur = ehaarKleur.options[ehaarKleur.selectedIndex].value;

        // if (fieldisleeg(geslacht)) {
        //     conditions.append(['sexe', '='])
        // }
        // if (fieldisleeg(haarKleur)) {
        //     conditions.append(['haarkleur', '='])
        // }

        // var users = [];
                var users = [{"_id":"56cae42a683485281caf5651","familienaam":"mqlsjkdfmklsdjmflkqsjdmlfk","achternaam":"dude","voornaam":"Jan","geboortedatum":"1954-12-14","email":"jv@hotmail.com","nickname":"doetje","foto":"jv.png","beroep":"instructeur","sexe":"m","haarkleur":"blond","oogkleur":"groen-grijs","grootte":184,"gewicht":88,"wachtwoord":"vdab"},{"_id":"56cae42a683485281caf5652","familienaam":"Ampersand","voornaam":"Paul","geboortedatum":"1968-01-04","email":"paul.ampersand@gmail.com","nickname":"Jetbrain","foto":"paul_ampersand.png","beroep":"fiscalist","sexe":"m","haarkleur":"blond","oogkleur":"blauw","grootte":181,"gewicht":72,"wachtwoord":"vdab"},{"_id":"56cae42a683485281caf5653","familienaam":"doeietskritis","voornaam":"Danira","geboortedatum":"1992-08-08","email":"ddiks@hotmail.com","nickname":"Danira","foto":"danira.png","beroep":"journalist","sexe":"v","haarkleur":"zwart","oogkleur":"bruin","grootte":170,"gewicht":62,"wachtwoord":"vdab"},{"_id":"56cae42a683485281caf5654","familienaam":"Delanghe","voornaam":"Annick","geboortedatum":"1984-05-01","email":"cutflower@telenet.be","nickname":"cutflower","foto":"adl.png","beroep":"bediende","sexe":"v","haarkleur":"zwart","oogkleur":"bruin","grootte":176,"gewicht":66,"wachtwoord":"vdab"},{"_id":"56cae42a683485281caf5655","familienaam":"Vaneenoo","voornaam":"Vanessa","geboortedatum":"1988-10-17","email":"vanessa@telenet.be","nickname":"dreamon","foto":"vanessa_vaneenoo.png","beroep":"student","sexe":"v","haarkleur":"donkerblond","oogkleur":"blauw","grootte":169,"gewicht":65,"wachtwoord":"vdab"},{"_id":"56cae42a683485281caf5656","familienaam":"Decaluwe","voornaam":"Kurt","geboortedatum":"1988-01-20","email":"kurt.decaluwe@hotmail.com","nickname":"streamliner","foto":"kurt_decaluwe.png","beroep":"arbeider","sexe":"m","haarkleur":"bruin","oogkleur":"bruin","grootte":192,"gewicht":101,"wachtwoord":"vdab"},{"_id":"56cae42a683485281caf5657","familienaam":"Debruyne","voornaam":"Ilse","geboortedatum":"1966-11-30","email":"ilse.debruyne@hotmail.com","nickname":"fluffy snowflake","foto":"ilse_debruyne.png","beroep":"leraar secundair onderwijs","sexe":"v","haarkleur":"donkerblond","oogkleur":"grijsgroen","grootte":170,"gewicht":90,"wachtwoord":"vdab"}]

        var minLeeftijd = document.getElementById("minleefTijd").value;
        var maxLeeftijd = document.getElementById("maxleefTijd").value;
        var geboorteJaarMin = (new Date().getFullYear - maxLeeftijd) + "-00-00"
        var geboorteJaarMax = (new Date().getFullYear - minLeeftijd) + "-00-00"
        var filteredLeeftijd;

        if(!fieldisleeg(minLeeftijd) && !fieldisleeg(maxLeeftijd)){
            // alle twee velden ingevuld
            filteredLeeftijd = users.filter(leeftijdBetween);
        }else{
            if(fieldisleeg(minLeeftijd)){
                //max veld ingevuld
                searchMap["geboortedatum"]= {"waarde": geboorteJaarMax, "match":"<"};
            }else{
                //min veld ingevuld
                searchMap["geboortedatum"]= {"waarde": geboorteJaarMin, "match":">"};
            }
        }
        var list = scrumlib.getDatasetsByConditions(searchMap);

        //console.log(filteredLeeftijd);
        console.log(list);

        function leeftijdBetween(value){
            let y  = value.geboortedatum.substring(0,4);
            let leeftijd  = new Date().getFullYear() - y

            if (leeftijd > minLeeftijd && leeftijd < maxLeeftijd){
                return value
            }else {
                return null
            }
        }

        

    });






    function fieldisleeg(field) {
        if (field == "") {
            return true;
        } else {
            return false;
        }
        return
    }
</script>

</html>
